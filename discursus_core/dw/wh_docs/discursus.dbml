project wh_discursus {

    database_type: 'snowflake'

}

// CORE WAREHOUSE

table actors_dim {

    actor_pk varchar [pk]

    actor_name varchar
    actor_type varchar
    actor_country varchar

}

table artifacts_fct {

    artifact_pk varchar [pk]
    event_fk varchar [ref: > events_fct.event_pk]
    reporter_pk varchar [ref: > reporters_dim.reporter_pk]

    published_date date

    artifact_type varchar
    artifact_url varchar
    artifact_page_title varchar
    artifact_page_description varchar
    artifact_keywords varchar

}

table events_fct {

    event_pk varchar [pk]
    protest_fk varchar [ref: > protests_dim.protest_pk]

    gdelt_event_natural_key int

    creation_ts timestamp

    action_country varchar
    action_geo_full_name varchar
    action_geo_adm1_code varchar
    action_geo_latitude decimal
    action_geo_longitude decimal
    event_type varchar

}

table reporters_dim {

    reporter_pk varchar [pk]

    reporter_name varchar
    reporter_type varchar
    reporter_country varchar

}

table protests_dim {

    protest_pk varchar [pk]

    protest_name varchar
    criteria_json varchar

}

table protest_actor_relationships_dim {

    protest_actor_relationship_pk varchar [pk]
    event_fk varchar [ref: > events_fct.event_pk]
    actor_fk varchar [ref: > actors_dim.actor_pk]

    actor_type varchar
    narrative varchar

}